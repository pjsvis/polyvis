@theme {
    /* 
   * CONTROL CENTER
   * This file is the single source of truth for the application's design.
   * PROCEDURE: Check here first. Tweak here first. Propose new variables here.
   */

    /* 
   * RATIONALIZATION: SPACING
   * Replacing the linear 0.25rem scale with Open Props relative sizing.
   */
    --spacing-0: var(--size-00);
    --spacing-1: var(--size-1);
    --spacing-2: var(--size-2);
    --spacing-3: var(--size-3);
    --spacing-4: var(--size-4);
    --spacing-5: var(--size-5);
    --spacing-6: var(--size-6);
    --spacing-7: var(--size-7);
    --spacing-8: var(--size-8);
    --spacing-9: var(--size-9);
    --spacing-10: var(--size-10);
    --spacing-11: var(--size-11);
    --spacing-12: var(--size-12);

    /* FLUID SPACING */
    --spacing-fluid-1: var(--size-fluid-1);
    --spacing-fluid-2: var(--size-fluid-2);
    --spacing-fluid-3: var(--size-fluid-3);

    /* 
   * RATIONALIZATION: COLORS
   * Explicitly mapping semantic names to Open Props OKLCH values.
   */
    --color-brand: var(--indigo-5);
    --color-brand-hover: var(--indigo-7);
    --color-surface-1: var(--surface-1);
    --color-surface-2: var(--surface-2);
    --color-text-1: var(--text-1);
    --color-text-2: var(--text-2);

    /* 
   * RATIONALIZATION: TYPOGRAPHY
   */
    --font-sans: Inter, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    --font-mono: "JetBrains Mono", "Roboto Mono", "Fira Code", Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

    --font-size-xs: var(--font-size-00);
    --font-size-sm: var(--font-size-0);
    --font-size-base: var(--font-size-1);
    --font-size-lg: var(--font-size-2);
    --font-size-xl: var(--font-size-3);
    --font-size-2xl: var(--font-size-4);
    --font-size-fluid-1: var(--font-size-fluid-1);
    --font-size-fluid-2: var(--font-size-fluid-2);
    --font-size-fluid-3: var(--font-size-fluid-3);
}

:root {
    /* 
     * APP VARIABLES (Default / Light)
     */
    font-family: var(--font-sans);

    /* Colors - Google Internal Aesthetic (High Contrast) */
    --primary: #202124;
    /* Google Dark Gray */
    --secondary: #ffffff;
    /* Crisp White */
    --accent: #f8f9fa;
    /* Google Light Gray (Sidebars) */

    /* Dimensions */
    --border-width: 1px;
    --shadow-offset: var(--size-1);

    /* Semantic Components */
    --surface-panel: #ffffff;
    --surface-hover: #f1f3f4;
    --border-base: #dadce0;
    /* Google Border Gray */
    --radius-component: 8px;
    /* Slightly rounder */

    /* Layout Dimensions */
    --width-sidebar-base: var(--size-content-2);
    --sidebar-width-left: var(--width-sidebar-base);
    --sidebar-width-right: var(--width-sidebar-base);
    --sidebar-content-align: stretch;
    /* flex-start (left), flex-end (right), center, stretch */
    --sidebar-padding: 0;
    /* Default to 0, let children handle or override */

    --header-height: auto;
    --footer-height: var(--size-10);
    --width-wrapper: 1100px;
    --width-home-box: 700px;

    /* Spacing */
    --app-padding: var(--size-4);
    --gap-standard: var(--size-4);

    /* TOC Specifics */
    --toc-gap-section: var(--size-4);
    --toc-gap-item: var(--size-2);
    /* Increased spacing for sub-items */
    --toc-indent: 1rem;
    --scroll-offset: var(--size-5);
    /* Reduced breathing room */

    /* Scrollbar */
    --scrollthumb-color: #dadce0;
    --scrollthumb-hover-color: #bdc1c6;
}

/* System Dark Mode Support */
@media (prefers-color-scheme: dark) {
    :root {
        /* App Variable Overrides (AntiGravity / Google Dark) */
        --primary: var(--gray-0);
        /* Text: High Contrast (#f8f9fa) */
        --secondary: var(--gray-9);
        /* Background: Deep (#202124) */
        --accent: var(--gray-8);
        /* Sidebar: Slightly lighter (#3c4043) */

        /* Open Props Dark Mode Overrides */
        --link: var(--blue-4);
        /* Google Blue (#8ab4f8) */
        --link-visited: var(--violet-4);

        --text-1: var(--gray-0);
        /* Primary Text */
        --text-2: var(--gray-3);
        /* Secondary Text */

        --surface-1: var(--gray-9);
        /* Main BG */
        --surface-2: var(--gray-8);
        /* Panels */
        --surface-3: var(--gray-7);
        /* Hover */
        --surface-4: var(--gray-6);
        /* Active */

        --scrollthumb-color: var(--gray-7);
        --scrollthumb-hover-color: var(--gray-6);

        --shadow-strength: 10%;
        --shadow-color: 220 40% 2%;

        /* Component Variables */
        --code-bg: var(--gray-8);
        --surface-panel: var(--gray-8);
        --surface-hover: var(--gray-7);
        --border-base: var(--gray-7);
    }
}

/* Theme Overrides */
html[data-theme="light"] {
    color-scheme: light;
    /* Ensure light mode variables are set (redundant but safe) */
    --primary: #202124;
    --secondary: #ffffff;
    --accent: #f8f9fa;

    --surface-1: #ffffff;
    --surface-2: #f8f9fa;
    --text-1: #202124;
    --text-2: #5f6368;

    /* Component Variables */
    --code-bg: #f1f3f4;
    --surface-panel: #ffffff;
    --surface-hover: #f1f3f4;
    --border-base: #dadce0;
}

html[data-theme="dark"] {
    color-scheme: dark;

    /* App Variable Overrides */
    --primary: var(--gray-0);
    --secondary: var(--gray-9);
    --accent: var(--gray-8);

    /* Open Props Dark Mode Overrides */
    --link: var(--blue-4);
    --link-visited: var(--violet-4);

    --text-1: var(--gray-0);
    --text-2: var(--gray-3);

    --surface-1: var(--gray-9);
    --surface-2: var(--gray-8);
    --surface-3: var(--gray-7);
    --surface-4: var(--gray-6);

    --scrollthumb-color: var(--gray-7);
    --scrollthumb-hover-color: var(--gray-6);

    --shadow-strength: 10%;
    --shadow-color: 220 40% 2%;

    /* Component Variables */
    --code-bg: var(--gray-8);
    --surface-panel: var(--gray-8);
    --surface-hover: var(--gray-7);
    --border-base: var(--gray-7);
}